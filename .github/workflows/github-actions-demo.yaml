name: compile
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:
  compilemac:
    runs-on: macos-latest
    permissions:
      contents: write
      pull-requests: write
      repository-projects: write

    steps:
      - uses: actions/checkout@v4
      - uses: actions-rust-lang/setup-rust-toolchain@v1
      - run: | 
          cargo xtask bundle havregryn --release
          cd /Users/runner/work/Havregryn/Havregryn/target/bundled/
          zip -r Havregryn.vst3.zip Havregryn_MacOS.vst3
      - uses: ncipollo/release-action@v1
        with:
          artifacts: '/Users/runner/work/Havregryn/Havregryn/target/bundled/Havregryn_MacOS.vst3.zip'